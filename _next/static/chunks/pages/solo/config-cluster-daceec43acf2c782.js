(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{52667:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/solo/config-cluster",function(){return r(97189)}])},97189:function(e,s,r){"use strict";r.r(s);var i=r(85893),t=r(67294),n=r(87536),l=r(8478),d=r(71866),o=r(71299),a=r(41518),c=r(11163),u=r(21237),f=r(28106),p=r(9765);let g=()=>{let e=(0,a.o)(e=>e.clusterDefinition),{control:s,register:r,handleSubmit:g,formState:{errors:m,isDirty:h,isValid:x},setValue:A,trigger:v}=(0,n.cI)({mode:"onChange",defaultValues:{singleAddress:"",feeRecipientAddress:"",name:""}}),S=(0,c.useRouter)(),j=(0,a.o)(e=>e.completeSoloStep),C=(0,a.o)(e=>e.enableSoloStep),N=(0,a.o)(e=>e.updateClusterDefinition),{account:b}=(0,o.kR)(),[k,_]=(0,t.useState)((null==e?void 0:e.clusterSize)||p.dd),w=(0,o.D9)(k),[R,y]=(0,t.useState)((null==e?void 0:e.validatorsSize)||1),[z,E]=(0,t.useState)(),[D,$]=(0,t.useState)(),P=e=>{e.preventDefault(),A("singleAddress",b),v("singleAddress")},T=e=>{e.preventDefault(),A("feeRecipientAddress",b),v("feeRecipientAddress")},I=e=>{j("config-cluster"),N({...e,creator:{address:b},validatorsEthAmount:z,operators:Array(k).fill({address:""}),validators:Array(R).fill({feeRecipientAddress:e.feeRecipientAddress,withdrawalAddress:e.singleAddress})});let s=C("confirm-configuration");S.push(s.href)};return(0,t.useEffect)(()=>{R&&E(32*R)},[R]),(0,t.useEffect)(()=>{if(k){let e=(0,u.zT)(k);$(e)}},[w,k]),(0,t.useEffect)(()=>{A("singleAddress",null==e?void 0:e.singleAddress),A("feeRecipientAddress",null==e?void 0:e.feeRecipientAddress),(null==e?void 0:e.name)&&A("name",null==e?void 0:e.name,{shouldDirty:!0,shouldValidate:!0})},[]),(0,i.jsxs)(l.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,i.jsx)(l.xv,{variant:"h3",children:"Configure Cluster"}),(0,i.jsx)(d.l0,{onSubmit:g(I),children:(0,i.jsxs)(l.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,i.jsx)(l.W2,{className:"cluster-details",alignItems:"start",children:(0,i.jsxs)(l.kC,{direction:"column",css:{gap:"$2xl"},children:[(0,i.jsx)(f.PQ,{register:r,clusterSize:k,setClusterSize:_,control:s,min:Number(p.Gb)}),(0,i.jsxs)(l.kC,{direction:"column",className:"operator-address-section",css:{gap:"$sm"},children:[(0,i.jsx)(l.xv,{css:{textTransform:"uppercase"},variant:"subline",color:"body",children:"Cluster Created By"}),(0,i.jsx)(l.xv,{color:"obolGreen",children:b})]})]})}),(0,i.jsx)(f.J1,{control:s,validatorsSize:R,setValidatorsSize:y}),(0,i.jsx)(l.W2,{className:"withdrawal-section",css:{gap:"$xl"},alignItems:"start",children:(0,i.jsx)(f.AN,{control:s,trigger:v,errors:m,handleOnSetAddress:P,heading:"Principal Address",description:"Address to receive validator principal and rewards at exit.",fieldName:"singleAddress"})}),(0,i.jsx)(l.W2,{className:"fee-recipient-section",css:{gap:"$xl"},alignItems:"start",children:(0,i.jsx)(f.AN,{control:s,trigger:v,errors:m,handleOnSetAddress:T,heading:"Fee Recipient",description:"Address to receive transaction fees from block proposals.",fieldName:"feeRecipientAddress"})}),(0,i.jsx)(l.kC,{direction:"column",children:(0,i.jsx)(l.zx,{color:"primary",type:"submit",disabled:!b||!x||!h,children:"Create Cluster Configuration"})})]})})]})};s.default=g,g.layout="SoloProgressTrackerLayout"}},function(e){e.O(0,[774,888,179],function(){return e(e.s=52667)}),_N_E=e.O()}]);